{% extends 'base.html' %}
{% block title %}Inicio - Portfolio{% endblock %}
{% block content %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>inicio portfolio</title>
</head>

<body>
  <div class="banner d-flex justify-content-between align-items-center">

    <div class="lado-izq">
      <h1>{{ usuario.nombre_publico }}</h1>
      <p class="text-muted">Desarrolladora web | front-end</p>
      <h5 class="mt-3 contacto-titulo">Información de contacto</h5>
      <ul class="list-unstyled contacto-lista">
        <li><strong>Teléfono:</strong> 351-34862..</li>
        <li><strong>Correo:</strong> oridaer@gmail.com</li>
        <li><strong>Residencia:</strong> Poeta Lugones - Córdoba Capital, Argentina</li>
      </ul>
    </div>

    <div class="lado-der">
      <img src="{{ url_for('uploads', filename=usuario.profile_image) }}" class="img-fluid" style="max-width: 280px;">
    </div>

  </div>

  <!--graficos porcentuales-->
  <!--
  <div class="eb-progress-bar-wrapper">

    <div class="eb-progress-bar html" style="--value: 85; --col: #FF5089">
      <progress id="html" min="0" max="100" value="85"></progress>
    </div>

    <label for="html" class="eb-progress-bar-title">
      <h2>Html</h2>
    </label>
  </div>
  

  <div class="eb-progress-bar-wrapper">
    <div class="eb-progress-bar css" style="--value: 91; --col: #FF1659">
      <progress id="css" min="0" max="100" value="91"></progress>
    </div>

    <label for="css" class="eb-progress-bar-title">
      <h2>Css</h2>
    </label>
  </div>

  <div class="eb-progress-bar-wrapper">

    <div class="eb-progress-bar js" style="--value: 68; --col: #E8232E">
      <progress id="js" min="0" max="100" value="68"></progress>
    </div>

    <label for="js" class="eb-progress-bar-title">
      <h2>JavaScript</h2>
    </label>
  </div>

  <div class="eb-progress-bar-wrapper">

    <div class="eb-progress-bar py" style="--value: 88; --col: #AD0346">
      <progress id="py" min="0" max="100" value="88"></progress>
    </div>

    <label for="py" class="eb-progress-bar-title">
      <h2>Python</h2>
    </label>
  </div>
-->
  <!---------HARD AND SOFT SKILLS-------->
  <section class="skills-section">
    <h1 class="skills-main-title">Hard &amp; Soft Skills</h1>

    <div class="skills-block">
      <h2 class="skills-subtitle">Habilidades Blandas</h2>
      <div class="skills-grid">

        <div class="skill">
          <div class="progress-circle" style="--value:90; --col:var(--pink);">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">90%</span>
          </div>
          <div class="skill-label">Empatía</div>
        </div>

        <div class="skill">
          <div class="progress-circle" style="--value:75; --col:#9C27B0;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">75%</span>
          </div>
          <div class="skill-label">Creatividad</div>
        </div>

        <div class="skill">
          <div class="progress-circle" style="--value:85; --col:#6200EE;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">85%</span>
          </div>
          <div class="skill-label">Observación</div>
        </div>

        <div class="skill">
          <div class="progress-circle" style="--value:80; --col:#AA00FF;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">80%</span>
          </div>
          <div class="skill-label">Organización</div>
        </div>

        <div class="skill">
          <div class="progress-circle" style="--value:90; --col:#D500F9;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">90%</span>
          </div>
          <div class="skill-label">Trabajo en equipo</div>
        </div>

      </div>
    </div>

    <div class="skills-block">
      <h2 class="skills-subtitle">Habilidades Técnicas</h2>
      <div class="skills-grid">

        <div class="skill">
          <div class="progress-circle" style="--value:80; --col:#3776AB;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">80%</span>
          </div>
          <div class="skill-label">Python</div>
        </div>

        <div class="skill">
          <div class="progress-circle" style="--value:60; --col:#61DAFB;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">60%</span>
          </div>
          <div class="skill-label">React</div>
        </div>

        <div class="skill">
          <div class="progress-circle" style="--value:80; --col:#E44D26;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">80%</span>
          </div>
          <div class="skill-label">HTML</div>
        </div>

        <div class="skill">
          <div class="progress-circle" style="--value:85; --col:#F7DF1E;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">85%</span>
          </div>
          <div class="skill-label">JavaScript</div>
        </div>

        <div class="skill">
          <div class="progress-circle" style="--value:80; --col:#1D6F42;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">90%</span>
          </div>
          <div class="skill-label">Excel / Word</div>
        </div>
        <div class="skill">
          <div class="progress-circle" style="--value:70; --col:#53e497;">
            <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
              <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
              <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
            </svg>
            <span class="progress-value">70%</span>
          </div>
          <div class="skill-label">CSS</div>
        </div>

        <div class="skills-block">
          <h2 class="skills-subtitle"> Idiomas</h2>
          <div class="skills-grid">

            <div class="skill">
              <div class="progress-circle" style="--value:60; --col:#8d61fb;">
                <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
                  <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
                  <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
                </svg>
                <span class="progress-value">60%</span>
              </div>
              <div class="skill-label">Ingles (B1)</div>
            </div>

            <div class="skill">
              <div class="progress-circle" style="--value:20; --col:#53c7e4;">
                <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
                  <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
                  <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
                </svg>
                <span class="progress-value">20%</span>
              </div>
              <div class="skill-label">Francés (A1)</div>
            </div>

            <div class="skill">
              <div class="progress-circle" style="--value:100; --col:#1D6F42;">
                <svg viewBox="0 0 44 44" class="progress-svg" aria-hidden="true">
                  <circle class="progress-bg" cx="22" cy="22" r="18"></circle>
                  <circle class="progress-ring" cx="22" cy="22" r="18"></circle>
                </svg>
                <span class="progress-value">100%</span>
              </div>
              <div class="skill-label">Español (Nativo)</div>
            </div>



          </div>
  </section>

  <!------------ACERCA DE MI--------->
  <section class="acerca-de-mi mt-4">
    <div class="row">

      <!-- COLUMNA IZQUIERDA -->
      <div class="col-md-4 text-center">
        <!-- FOTO -->
        <img src="{{ url_for('static', filename='uploads/daer.png') }}" class="img-fluid rounded-circle mb-3"
          alt="Mi foto" style="width:200px; height:200px; object-fit:cover;">


        <!-- NOMBRE -->
        <h3 class="mt-2">{{ usuario.nombre_publico}}</h3>

        <!-- TÍTULO -->
        <h5 class="text-muted">Técnica en Programación</h5>
      </div>

      <!-- COLUMNA DERECHA -->
      <div class="col-md-8">
        <h2>Acerca de mí</h2>

        <p class="mt-3" style="white-space: pre-line;">
          {{ usuario.acerca_de_mi }}
        </p>

        {% if session.get('user') %}
        <form method="POST" action="{{ url_for('editar_acerca') }}" class="mt-3">
          <textarea name="acerca" class="form-control" rows="5">{{ usuario.acerca_de_mi }}</textarea>
          <button class="btn btn-primary mt-2">Guardar cambios</button>
        </form>
        {% endif %}
      </div>

    </div>
  </section>

  <!--Experiencia Laboral-->
  <h3>Experiencia Laboral</h3>

  {% for exp in experiencias %}
  <div class="card p-3 mb-3 d-flex flex-row align-items-center">

    <div class="flex-grow-1">
      <h5>{{ exp.proyecto }}</h5>
      <p>{{ exp.descripcion }}</p>
      <p><strong>Puesto:</strong> {{ exp.puesto }}</p>
      <p><strong>Periodo:</strong> {{ exp.periodo }}</p>
      <p><strong>Logros:</strong> {{ exp.logros }}</p>
    </div>

    {% if session.get('user') %}
    <!-- Botón ELIMINAR -->
    <form method="POST" action="{{ url_for('eliminar_experiencia', exp_id=exp.id) }}" class="me-2">
      {{ delete_forms[exp.id].hidden_tag() }}
      {{ delete_forms[exp.id].submit(class="btn btn-danger btn-sm") }}
    </form>

    <!-- Botón MODIFICAR -->
    <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#modalEditarExp{{ exp.id }}">
      Editar
    </button>

    {% endif %}
  </div>

  {% if session.get('user') %}
  <!-- Modal EDITAR Experiencia -->
  <div class="modal fade" id="modalEditarExp{{ exp.id }}" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <form method="POST" action="{{ url_for('modificar_experiencia', exp_id=exp.id) }}">
          {{ edit_form.hidden_tag() }}

          <div class="modal-header">
            <h5 class="modal-title">Editar Experiencia</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>

          <div class="modal-body">
            <label>Proyecto</label>
            {{ edit_form.proyecto(class="form-control mb-2", value=exp.proyecto) }}

            <label>Puesto</label>
            {{ edit_form.puesto(class="form-control mb-2", value=exp.puesto) }}

            <label>Periodo</label>
            {{ edit_form.periodo(class="form-control mb-2", value=exp.periodo) }}

            <label>Descripción</label>
            {{ edit_form.descripcion(class="form-control mb-2", value=exp.descripcion) }}

            <label>Logros</label>
            {{ edit_form.logros(class="form-control mb-2", value=exp.logros) }}
          </div>

          <div class="modal-footer">
            {{ edit_form.submit(class="btn btn-primary") }}
          </div>
        </form>
      </div>
    </div>
  </div>
  {% endif %}
  {% endfor %}



  <!-------Cursos y certificaciones------>

  <h4 class="mt-4">Cursos y Certificaciones</h4>

  {% if not session.get('user') %}
  <ul class="list-group">
    {% for curso in cursos %}
    <li class="list-group-item">
      <strong>{{ curso.nombre }}</strong><br>
      {{ curso.institucion }} - {{ curso.periodo }}<br>

    </li>
    {% endfor %}
  </ul>
  {% endif %}


  {% if session.get('user') %}

  <h4 class="mt-4">Cursos cargados</h4>

  {% for c in cursos %}
  <div class="card p-3 mb-3 d-flex flex-row align-items-center">

    <div class="flex-grow-1">
      <h5>{{ c.nombre }}</h5>
      <p class="mb-0"><strong>{{ c.institucion }}</strong></p>
      <p class="mb-0">{{ c.periodo }}</p>
    </div>

    <!-- Botón EDITAR -->
    <button class="btn btn-warning btn-sm me-2" data-bs-toggle="modal" data-bs-target="#modalEditarCurso{{ c.id }}">
      Editar
    </button>

    <!-- Botón ELIMINAR -->
    <form method="POST" action="{{ url_for('eliminar_curso', curso_id=c.id) }}">
      {{ form_elim_curso.csrf_token }}
      <button class="btn btn-danger btn-sm">Eliminar</button>
    </form>

  </div>

  <!-- Modal editar curso -->
  <div class="modal fade" id="modalEditarCurso{{ c.id }}" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">

        <form method="POST" action="{{ url_for('modificar_curso', curso_id=c.id) }}">
          {{ form_modif_curso.hidden_tag() }}

          <div class="modal-header">
            <h5 class="modal-title">Editar Curso</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>

          <div class="modal-body">

            {{ form_modif_curso.nombre(class="form-control mb-2", value=c.nombre) }}
            {{ form_modif_curso.institucion(class="form-control mb-2", value=c.institucion) }}
            {{ form_modif_curso.periodo(class="form-control mb-2", value=c.periodo) }}

          </div>

          <div class="modal-footer">
            {{ form_modif_curso.submit(class="btn btn-primary") }}
          </div>

        </form>

      </div>
    </div>
  </div>

  {% endfor %}

  <!-- AGREGAR CURSO -->
  <div class="card p-3 mb-4">
    <h5>Agregar nuevo curso</h5>

    <form method="POST" action="{{ url_for('agregar_curso') }}">
      {{ form_curso.csrf_token }}

      {{ form_curso.nombre(class="form-control mb-2", placeholder="Nombre del curso") }}
      {{ form_curso.institucion(class="form-control mb-2", placeholder="Institución") }}
      {{ form_curso.periodo(class="form-control mb-2", placeholder="Periodo") }}

      {{ form_curso.submit(class="btn btn-success") }}
    </form>
  </div>

  {% endif %}




  <!------PROYECTOSSSSS-------->
<h3>Proyectos</h3>

{% for p in proyectos %}
<div class="card p-3 mb-3 d-flex flex-row align-items-center">

    {% if p.imagen %}
    <img src="{{ url_for('uploads', filename=p.imagen) }}" style="width:60px;height:60px;object-fit:cover;" class="me-3">
    {% endif %}

    <div class="flex-grow-1">
        <h5>{{ p.titulo }}</h5>
        <p>{{ p.descripcion }}</p>
        <p><strong>Fecha:</strong> {{ p.fecha }}</p>
        {% if p.github_url %}
        <p><a href="{{ p.github_url }}" target="_blank">GitHub</a></p>
        {% endif %}
    </div>

    {% if session.get('user') %}
    <div class="d-flex">
        <form method="POST" action="{{ url_for('eliminar_proyecto', proy_id=p.id) }}" class="me-2">
            {{ form_eliminar_proyecto.hidden_tag() }}
            <button class="btn btn-danger btn-sm">Eliminar</button>
        </form>

        <!-- Botón Editar -->
        <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#modalEditarProy{{ p.id }}">
            Editar
        </button>
    </div>
    {% endif %}

</div>

{% if session.get('user') %}
<!-- Modal Editar -->
<div class="modal fade" id="modalEditarProy{{ p.id }}" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="POST" enctype="multipart/form-data" action="{{ url_for('modificar_proyecto', proy_id=p.id) }}">
        {{ form_editar.hidden_tag() }}

        <div class="modal-header">
          <h5 class="modal-title">Editar Proyecto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          {{ form_editar.titulo(class_="form-control mb-2", value=p.titulo) }}
          {{ form_editar.descripcion(class_="form-control mb-2", value=p.descripcion) }}
          {{ form_editar.fecha(class_="form-control mb-2", value=p.fecha) }}
          {{ form_editar.github_url(class_="form-control mb-2", value=p.github_url) }}
          {{ form_editar.imagen(class_="form-control mb-2") }}

          {% if p.imagen %}
          <img src="{{ url_for('uploads', filename=p.imagen) }}" style="width:60px;height:60px;object-fit:cover;" class="mt-2">
          {% endif %}
        </div>

        <div class="modal-footer">
          {{ form_editar.submit(class_="btn btn-primary") }}
        </div>
      </form>
    </div>
  </div>
</div>
{% endif %}
{% endfor %}

<!-- Formulario agregar nuevo proyecto -->
{% if session.get('user') %}
<div class="card p-3 mb-4">
  <h5>Agregar nuevo proyecto</h5>
  <form method="POST" enctype="multipart/form-data" action="{{ url_for('agregar_proyecto') }}">
    {{ form_proyect.hidden_tag() }}
    {{ form_proyect.titulo(class_="form-control mb-2", placeholder="Título") }}
    {{ form_proyect.descripcion(class_="form-control mb-2", placeholder="Descripción") }}
    {{ form_proyect.fecha(class_="form-control mb-2", placeholder="Fecha") }}
    {{ form_proyect.github_url(class_="form-control mb-2", placeholder="GitHub URL") }}
    {{ form_proyect.imagen(class_="form-control mb-2") }}
    {{ form_proyect.submit(class_="btn btn-success") }}
  </form>
</div>
{% endif %}


</body>

</html>
{% endblock %}